<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Filesystem Hooks · Treats</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;Treats uses several files and folders as APIs for customizing app implementations. Filesystem hooks let your code to easily injects any implementations to Treats internal. These filesystem hooks can be supplied under &lt;code&gt;src/_**&lt;/code&gt; directories.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Filesystem Hooks · Treats"/><meta property="og:type" content="website"/><meta property="og:url" content="https://tokopedia.github.io/treats/treats/index.html"/><meta property="og:description" content="&lt;p&gt;Treats uses several files and folders as APIs for customizing app implementations. Filesystem hooks let your code to easily injects any implementations to Treats internal. These filesystem hooks can be supplied under &lt;code&gt;src/_**&lt;/code&gt; directories.&lt;/p&gt;
"/><meta property="og:image" content="https://tokopedia.github.io/treats/treats/img/toped.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://tokopedia.github.io/treats/treats/img/toped.png"/><link rel="shortcut icon" href="/treats/img/favicon.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/treats/css/main.css"/></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/treats/"><img class="logo" src="/treats/img/treats.png" alt="Treats"/><h2 class="headerTitleWithLogo">Treats</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/treats/docs/installation.html" target="_self">Getting Started</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>API Reference</span></h2></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Getting Started</h3><ul><li class="navListItem"><a class="navItem" href="/treats/docs/installation.html">Installation</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Tutorial</h3><ul><li class="navListItem"><a class="navItem" href="/treats/docs/tutorial/01.html">01. Creating Your First Page</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/tutorial/02.html">02. Using Redux</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/tutorial/03.html">03. Using GraphQL</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/tutorial/04.html">04. Fetch Data for SSR</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/tutorial/05.html">05. Adding Addons</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Main Concepts</h3><ul><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/routing.html">Routing</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/localization.html">Localization</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/code-splitting.html">Code-splitting</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/redux.html">Redux</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/graphql-client.html">GraphQL Client</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/middleware.html">Middlewares</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/helper.html">Helpers</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/server-side-event.html">Server-side Events</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/server-side-template.html">Server-side Template</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/server-side-rendering.html">Server-side Rendering</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/custom-server-app.html">Custom Server App</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/custom-client-initialization.html">Custom Client Initialization</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/custom-react-app.html">Custom React App</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/runtime-config.html">Runtime Config</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/build-config.html">Build Config</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/environment-variable.html">Environment Variables</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/generator.html">Code Generator</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/scripts.html">Scripts</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/addons.html">Addons</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/typescript.html">Typescript</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/main-concept/workbox.html">Workbox</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/treats/docs/api-reference/overview.html">Overview</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/treats/docs/api-reference/filesystem-hooks.html">Filesystem Hooks</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/api-reference/component.html">Components</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/api-reference/server.html">Server</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/api-reference/client.html">Client</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/api-reference/router.html">Router</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/api-reference/intl.html">Intl</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/api-reference/locale-data.html">Locale Data</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/api-reference/helmet.html">Helmet</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/api-reference/redux.html">Redux</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/api-reference/graphql.html">Graphql</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Authoring Addons</h3><ul><li class="navListItem"><a class="navItem" href="/treats/docs/authoring-addons/overview.html">Overview</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/authoring-addons/helper.html">Helpers</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/authoring-addons/middleware.html">Middlewares</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/authoring-addons/generator.html">Generators</a></li><li class="navListItem"><a class="navItem" href="/treats/docs/authoring-addons/wrap-up.html">Wrapping Up</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Addons</h3><ul><li class="navListItem"><a class="navItem" href="/treats/docs/list-of-addons.html">Treats Addons List</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Contributing</h3><ul><li class="navListItem"><a class="navItem" href="/treats/docs/contributing/how-to-contribute.html">How To Contribute</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">FAQ</h3><ul><li class="navListItem"><a class="navItem" href="/treats/docs/faq.html">FAQs</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Filesystem Hooks</h1></header><article><div><span><p>Treats uses several files and folders as APIs for customizing app implementations. Filesystem hooks let your code to easily injects any implementations to Treats internal. These filesystem hooks can be supplied under <code>src/_**</code> directories.</p>
<h3><a class="anchor" aria-hidden="true" id="server-indexjs"></a><a href="#server-indexjs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_server/index.js</h3>
<p>This filesystem hook can be used to inject Treats server app implementation. With this filesystem hooks you can provide custom server apps. You can also register custom middlewares, helpers and server-side events here. Use <a href="./server.html#initServer"><code>initServer</code> helper function</a> from <code>@treats/server</code> for easier server app creation. For example:</p>
<pre><code class="hljs"><span class="hljs-comment">// src/_server/index.js</span>
<span class="hljs-keyword">import</span> initServer <span class="hljs-keyword">from</span> <span class="hljs-string">"@treats/server"</span>;
<span class="hljs-keyword">import</span> { customMiddlewareA, customMiddlewareB } <span class="hljs-keyword">from</span> <span class="hljs-string">"@treats/addons-example"</span>;

<span class="hljs-keyword">const</span> app = initServer({
    <span class="hljs-attr">customMiddlewares</span>: [customMiddlewareA, customMiddlewareB]
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> app;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="client-indexjs"></a><a href="#client-indexjs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_client/index.js</h3>
<p>This filesystem hook can be used to inject Treats client app implementation. Use <code>initClient</code> from <code>@treats/client</code> for easier client app creation. For example:</p>
<pre><code class="hljs"><span class="hljs-comment">// src/_client/index.js</span>
<span class="hljs-keyword">import</span> initClient <span class="hljs-keyword">from</span> <span class="hljs-string">"@treats/client"</span>;

<span class="hljs-keyword">const</span> app = initClient();

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> app;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="app-indexjs"></a><a href="#app-indexjs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_app/index.js</h3>
<p>This filesystem hooks can be used to inject React app implementation. For example:</p>
<pre><code class="hljs"><span class="hljs-keyword">import</span> <span class="hljs-type">React</span>, { <span class="hljs-type">Component</span> } from <span class="hljs-string">"react"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-type">Helmet</span> } from <span class="hljs-string">"@treats/helmet"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-type">Route</span>, <span class="hljs-type">Switch</span> } from <span class="hljs-string">"@treats/router"</span>;
<span class="hljs-keyword">import</span> routes from <span class="hljs-string">"@treats/route"</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Component</span> </span>{
    render() {
        const { language } = <span class="hljs-keyword">this</span>.props;
        <span class="hljs-keyword">return</span> (
            &lt;div id=<span class="hljs-string">"my-custom-app"</span>&gt;
                &lt;<span class="hljs-type">Helmet</span>&gt;
                    &lt;html lang={language} /&gt;
                &lt;/<span class="hljs-type">Helmet</span>&gt;
                &lt;<span class="hljs-type">Switch</span>&gt;
                    {routes.map(entry =&gt; (
                        &lt;<span class="hljs-type">Route</span> key={entry.path} {...entry} /&gt;
                    ))}
                &lt;/<span class="hljs-type">Switch</span>&gt;  
            &lt;/div&gt; 
        )
    }
}

export <span class="hljs-keyword">default</span> <span class="hljs-type">App</span>;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="app-appcss"></a><a href="#app-appcss" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_app/app.css</h3>
<p>This filesystem hooks can be used to inject global css to your app without providing custom App implementation. For example:</p>
<pre><code class="hljs">@<span class="hljs-keyword">import</span> <span class="hljs-string">"./bootstrap.css"</span>;
<span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">position</span>: relative;
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="route-routejs"></a><a href="#route-routejs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_route/route.js</h3>
<p>This filesystem hook serves as route configuration for your app.</p>
<pre><code class="hljs"><span class="hljs-builtin-name">export</span><span class="hljs-built_in"> default </span>[
    {
        path: <span class="hljs-string">"/my-page"</span>,
        exact: <span class="hljs-literal">true</span>,  
    },
    {
        path: <span class="hljs-string">"/page/:id"</span>,
        template: <span class="hljs-string">"custom-template"</span>
    },
]
</code></pre>
<p>For routing, Treats uses <a href="https://reacttraining.com/react-router">react-router-v4</a> under the hood, with additional configuration field that's specific to Treats use-case:</p>
<ol>
<li><strong>path</strong> - Any valid URL path that <a href="https://www.npmjs.com/package/path-to-regexp">path-to-regexp</a> understands.</li>
<li><strong>exact</strong> - When <strong>true</strong>, will only match if the path matches the location.pathname exactly.</li>
<li><strong>strict</strong> - When <strong>true</strong>, a path that has a trailing slash will only match a location.pathname with a trailing slash. This has no effect when there are additional URL segments in the location.pathname.</li>
<li><strong>sensitive</strong> - When <strong>true</strong>, will match if the path is case sensitive.</li>
<li><strong>isPush</strong> - When <strong>false</strong>, will block client-side routing and force page to reload.</li>
<li><strong>template</strong> - Server-side template name to be used on this route.</li>
</ol>
<h3><a class="anchor" aria-hidden="true" id="route-modulejs"></a><a href="#route-modulejs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_route/module.js</h3>
<p>This filesystem hook can be used to register page for your routes. For example:</p>
<pre><code class="hljs"><span class="hljs-regexp">//</span> src/_route/<span class="hljs-built_in">module</span>.js
<span class="hljs-keyword">import</span> MyPage <span class="hljs-keyword">from</span> <span class="hljs-string">"@page/my-page"</span>;
<span class="hljs-keyword">import</span> Page2 <span class="hljs-keyword">from</span> <span class="hljs-string">"@page/page2"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-string">"/my-page"</span>: MyPage,
    <span class="hljs-string">"/page/:id"</span>: Page2
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="server-templatejs"></a><a href="#server-templatejs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_server/template.js</h3>
<p>This filesystem hook can be used to register server-side template. For example:</p>
<pre><code class="hljs"><span class="xml">// src/_server/template.js
const templates = </span><span class="hljs-template-variable">{
    myTemplate: renderParams =&gt; {
        const {
            helmet,
            cssTags,
            cssHash,
            reduxState,
            apolloState,
            reactMarkup,
            jsTags
        }</span><span class="xml"> = renderParams;

        return `<span class="hljs-meta">&lt;!DOCTYPE html&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">html</span> $</span></span><span class="hljs-template-variable">{helmet.htmlAttributes}</span><span class="xml"><span class="hljs-tag">&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
                $</span><span class="hljs-template-variable">{helmet.title}</span><span class="xml">
                $</span><span class="hljs-template-variable">{helmet.meta}</span><span class="xml">
                $</span><span class="hljs-template-variable">{helmet.link}</span><span class="xml">
                $</span><span class="hljs-template-variable">{cssTags}</span><span class="xml">
                $</span><span class="hljs-template-variable">{cssHash}</span><span class="xml">
                <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="undefined">
                    $</span></span><span class="hljs-template-variable">{reduxState ? `window.__data=${reduxState}</span><span class="xml"><span class="actionscript">;` : <span class="hljs-string">""</span>}
                    $</span></span><span class="hljs-template-variable">{apolloState ? `window.__apollo=${apolloState}</span><span class="xml"><span class="actionscript">;` : <span class="hljs-string">""</span>} 
                </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">body</span> $</span></span><span class="hljs-template-variable">{helmet.bodyAttributes}</span><span class="xml"><span class="hljs-tag">&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"treats-root"</span>&gt;</span>$</span><span class="hljs-template-variable">{reactMarkup}</span><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            $</span><span class="hljs-template-variable">{helmet.script}</span><span class="xml">
            $</span><span class="hljs-template-variable">{jsTags}</span><span class="xml">
        <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>`;
    }
};

export default templates;
</span></code></pre>
<h3><a class="anchor" aria-hidden="true" id="locale-indexjs"></a><a href="#locale-indexjs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_locale/index.js</h3>
<p>This filesystem hook can be used to inject translation json for your server-side app:</p>
<pre><code class="hljs"><span class="hljs-regexp">//</span> src<span class="hljs-regexp">/_locale/</span>en.json
{
    <span class="hljs-string">"translation_entry"</span>: <span class="hljs-string">"Translation"</span>
}
</code></pre>
<pre><code class="hljs"><span class="hljs-regexp">//</span> src<span class="hljs-regexp">/_locale/i</span>d.json
{
    <span class="hljs-string">"translation_entry"</span>: <span class="hljs-string">"Translation"</span>
}
</code></pre>
<pre><code class="hljs"><span class="hljs-comment">// src/_locale/index.js</span>
<span class="hljs-keyword">import</span> en <span class="hljs-keyword">from</span> <span class="hljs-string">"./en.json"</span>;
<span class="hljs-keyword">import</span> id <span class="hljs-keyword">from</span> <span class="hljs-string">"./id.json"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    en,
    id
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="locale-resolverjs"></a><a href="#locale-resolverjs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_locale/resolver.js</h3>
<p>This filesystem hook can be used to dynamically import your translation messages and locale data:</p>
<pre><code class="hljs"><span class="hljs-comment">// src/_locale/resolver.js</span>
<span class="hljs-keyword">const</span> resolver = <span class="hljs-function"><span class="hljs-params">lang</span> =&gt;</span> {
    <span class="hljs-keyword">switch</span> (lang) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"id"</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([
                <span class="hljs-keyword">import</span>(<span class="hljs-string">"@treats/locale-data/id"</span>),
                <span class="hljs-keyword">import</span>(<span class="hljs-string">"./id.json"</span>)
            ]);
        <span class="hljs-keyword">case</span> <span class="hljs-string">"en"</span>:
        <span class="hljs-keyword">default</span>:
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">Promise</span>.all([
                <span class="hljs-keyword">import</span>(<span class="hljs-string">"@treats/locale-data/en"</span>),
                <span class="hljs-keyword">import</span>(<span class="hljs-string">"./en.json"</span>)
            ]);
    }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> resolver;
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="redux-middlewarejs"></a><a href="#redux-middlewarejs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_redux/middleware.js</h3>
<p>This filesystem hooks can be used to register Redux middleware to be used within our redux store:</p>
<pre><code class="hljs"><span class="hljs-comment">// src/_redux/middleware.js</span>
<span class="hljs-keyword">import</span> thunk <span class="hljs-keyword">from</span> <span class="hljs-string">"redux-thunk"</span>;
<span class="hljs-keyword">import</span> { logger } <span class="hljs-keyword">from</span> <span class="hljs-string">"redux-logger"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [thunk, logger];
</code></pre>
<blockquote>
<p>This filesystem hook will be deactivated if redux set to <code>false</code> in build config.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="redux-reducerjs"></a><a href="#redux-reducerjs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_redux/reducer.js</h3>
<p>This filesystem hooks can be used to register root reducers that would be used in your app:</p>
<pre><code class="hljs"><span class="hljs-comment">// src/_redux/reducer.js</span>
<span class="hljs-keyword">import</span> { combineReducers } <span class="hljs-keyword">from</span> <span class="hljs-string">"@treats/redux"</span>;
<span class="hljs-keyword">import</span> HomeReducer <span class="hljs-keyword">from</span> <span class="hljs-string">"./home"</span>;
<span class="hljs-keyword">import</span> AboutReducer <span class="hljs-keyword">from</span> <span class="hljs-string">"./about"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> combineReducers({
    <span class="hljs-attr">home</span>: HomeReducer,
    <span class="hljs-attr">about</span>: AboutReducer
});
</code></pre>
<blockquote>
<p>This filesystem hook will be deactivated if redux set to <code>false</code> in build config.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="graphql-link-statejs"></a><a href="#graphql-link-statejs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_graphql/link-state.js</h3>
<p>This filesystem hooks can be used to register Apollo Link State resolvers that would be used in your app:</p>
<pre><code class="hljs"><span class="hljs-comment">// src/_graphql/link-state.js</span>
<span class="hljs-keyword">const</span> resolverA = {
    Mutation: {
        addTodo: <span class="hljs-function">(<span class="hljs-params">_, { text }, { cache }</span>) =&gt;</span> {
        ...
        <span class="hljs-keyword">return</span> newTodo;
        },
        toggleTodo: <span class="hljs-function">(<span class="hljs-params">_, variables, { cache }</span>) =&gt;</span> {
            ...
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        },
    },
};
<span class="hljs-keyword">const</span> resolverB = {
    Mutation: {
        ...
    }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [resolverA, resolverB];
</code></pre>
<blockquote>
<p>This filesystem hook will be deactivated if graphql set to <code>false</code> in build config.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="graphql-urijs"></a><a href="#graphql-urijs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_graphql/uri.js</h3>
<p>This filesystem hooks can be used to register Apollo Batch HTTP link URI, this should be filled with your GraphQL server URI:</p>
<pre><code class="hljs"><span class="hljs-comment">// src/_graphql/uri.js</span>
<span class="hljs-keyword">const</span> uri =<span class="hljs-string">"https://example.graphql.endpoint/graphql"</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> uri
</code></pre>
<blockquote>
<p>This filesystem hook will be deactivated if graphql set to <code>false</code> in build config.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="graphql-configjs"></a><a href="#graphql-configjs" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>_graphql/config.js</h3>
<p>This filesystem hooks can be used if you want to supply your own Apollo Client config. For example:</p>
<pre><code class="hljs"><span class="hljs-comment">// src/_graphql/config.js</span>
<span class="hljs-keyword">import</span> { RetryLink } <span class="hljs-keyword">from</span> <span class="hljs-string">"apollo-link-retry"</span>;

<span class="hljs-keyword">const</span> customConfig = {
    queryDeduplication: <span class="hljs-literal">true</span>,
    link: [
        <span class="hljs-comment">// using provided apollo-link-error</span>
        {
            <span class="hljs-keyword">type</span>: <span class="hljs-string">"error"</span>,
            callback: <span class="hljs-function">(<span class="hljs-params">{ graphQLErrors, networkError }</span>) =&gt;</span> {
                ...
            }
        },
        <span class="hljs-comment">//using provided apollo-link-batch-http</span>
        {
            <span class="hljs-keyword">type</span>: <span class="hljs-string">"batch-http"</span>,
            uri: <span class="hljs-string">"http://example.graphql.endpoint/graphql"</span>
        },
        <span class="hljs-comment">//using custom installed RetryLink</span>
        <span class="hljs-keyword">new</span> RetryLink({
            delay: {
                initial: <span class="hljs-number">300</span>,
                max: <span class="hljs-literal">Infinity</span>,
                jitter: <span class="hljs-literal">true</span>
            },
            attempts: {
                max: <span class="hljs-number">5</span>,
                retryIf: <span class="hljs-function">(<span class="hljs-params">error, _operation</span>) =&gt;</span> !!error
            }
        })
    ]
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> customConfig;
</code></pre>
<p>We provides several apollo-link by default:</p>
<ol>
<li><a href="https://www.npmjs.com/package/apollo-link-batch-http">batch-http</a> - Batch HTTP requests together.</li>
<li><a href="https://www.npmjs.com/package/apollo-link-http">http</a> - Normal HTTP requests link.</li>
<li><a href="https://www.apollographql.com/docs/react/features/error-handling.html">error</a> - Error handling link.</li>
<li><a href="https://www.apollographql.com/docs/link/links/state.html">state</a> - Manage local state with GraphQL.</li>
</ol>
<blockquote>
<p>Please note that there's still several apollo mandatory and best practices that we'll provides, for example turning ssrMode on server environment</p>
</blockquote>
<blockquote>
<p>This filesystem hook will override Apollo link state and URI config if it is specified.</p>
</blockquote>
<blockquote>
<p>This filesystem hook will be deactivated if graphql set to <code>false</code> in build config.</p>
</blockquote>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/treats/docs/api-reference/overview.html"><span class="arrow-prev">← </span><span>Overview</span></a><a class="docs-next button" href="/treats/docs/api-reference/component.html"><span>Components</span><span class="arrow-next"> →</span></a></div></div></div></div><footer class="nav-footer" id="footer"><a href="https://github.com/tokopedia/" target="_blank" rel="noreferrer noopener" class="tkpdOpensource"><img class="tkpdOpenSourceLogo" src="/treats/img/tokopedia.png" alt="Tokopedia Open Source"/></a><section class="copyright">Copyright © 2019 Tokopedia OSS</section></footer></div></body></html>